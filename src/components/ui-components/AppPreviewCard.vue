<template>
  <!-- v-bind:class="{'preview-card-hover': appPreviewSettings.showHover}" -->
  <!-- v-bind:style="{ padding: appPreviewSettings.padding +'!important' }" -->
  <div
    class="preview-card card"
    v-bind:class="{'preview-card-hover': appPreviewSettings.showHover}"
    v-on:click="item.id ? redirect() : ''"
  >
    <div class="card-image">
      <figure :class="['image', appPreviewSettings.cardImage.imageSize]">
        <img :src="getImageUrl" :alt="item.image"/>
      </figure>
    </div>
    <div :class="['card-content', appPreviewSettings.cardContent]">
      <div class="content">
        <p class="title is-4" v-if="item.title">{{ item.title }}</p>
        <p class="subtitle is-7 is-italic" v-if="item.subtitle">{{ item.subtitle }}</p>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  name: "AppPreviewCard",
  props: {
    item: { type: Object, required: true },
    type: { type: String },
    appPreviewSettings: {
      default: function () {
        return {
          showHover: true,
          cardContent: "",
          cardImage: {
            imageSize: "is-4by3",
          },
        };
      },
      type: Object,
    },
  },
  created() {},
  computed: {
    getImageUrl() {
      try {
          return require("../../assets/images/" + this.item.image);
        }
        catch(err) {
          return require("../../assets/images/KumaonHeritageTile.png");
        }
      // TODO: create folders for each type eg: destinations/[name].png , packages/[name].png
      // const type = this.item.type;
      // const fileName = this.item.image.name.toLowerCase();
      // const ext = this.item.image.ext;

      // return require(`../../assets/images/${type}/${fileName}.${ext}`);
      //return require("../../assets/images/destinations/nainital.webp");
    }
  },
  methods: {
    redirect: function () {
      this.$router.push({
        name: "detail",
        params: { packageId: this.item.key },
      });
    },
  },
};
</script>

<style lang="scss">
.preview-card {
  height: 100%;
  border-radius: 4px;
  transition: all 0.2s ease-in-out;
  cursor: pointer;

  .card-image > .image > img {
    border-radius: 4px 4px 0 0;
  }
  .card-content {
    padding: 0.75rem !important;
  }
}

.preview-card-hover {
  &:hover {
    cursor: pointer;
    box-shadow: 0 0 15px 2px;
    transform: scale(1.07);
  }
}

.card-setting {
  &.card-content {
    padding: unset !important;
  }
  .content {
    padding: 6px;
    text-align: left;

    .title.is-4 {
      font-family: SFProDisplay-Bold;
      font-size: 24px;
      line-height: 20px;
      text-transform: capitalize;
      color: #3b404b;
      padding-bottom: 8px;
    }

    .subtitle {
      // margin-top: 4px !important;
      font-style: unset !important;
      font-family: SFProDisplay-Bold;
      font-size: 12px;
      line-height: 14px;
      text-transform: capitalize;
      color: #9d9fa5;
      padding-bottom: 8px;
      font-weight: 700;
    }
  }
}
</style>
